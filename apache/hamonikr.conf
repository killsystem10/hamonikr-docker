<VirtualHost *:80>
        ServerName hamonikr.org
        ServerAlias www.hamonikr.org
        ServerAdmin hckim@invesume.com

        DocumentRoot /var/www/hamonikr

        # Filter common crawling bots from the access log.
        SetEnvIfNoCase User-Agent googlebot dontlog
        SetEnvIfNoCase User-Agent bingbot dontlog
        SetEnvIfNoCase User-Agent baiduspider dontlog
        SetEnvIfNoCase User-Agent "^AhrefsBot" dontlog
        SetEnvIfNoCase User-Agent AhrefsBot dontlog
        SetEnvIfNoCase User-Agent "AhrefsBot/7.0" dontlog

        ErrorLog "|/usr/bin/rotatelogs /var/log/apache2/hamonikr-error_log.%Y%m%d 86400 540"
        CustomLog "|/usr/bin/rotatelogs /var/log/apache2/hamonikr-access_log.%Y%m%d 86400 540" geoip env=!dontlog

        <Directory "/var/www/hamonikr/">
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Require all granted
        </Directory>

        <IfModule mod_rewrite.c>
            RewriteEngine On
            RewriteCond %{HTTP_USER_AGENT} Applebot [NC,OR]
            RewriteCond %{HTTP_USER_AGENT} Amazonbot [NC,OR]
            RewriteCond %{HTTP_USER_AGENT} facebookexternalhit [NC,OR]
            RewriteCond %{HTTP_USER_AGENT} Bytespider [NC]
            RewriteRule .* - [F,L]
        </IfModule>

        RewriteEngine on
        RewriteCond %{SERVER_NAME} =hamonikr.org [OR]
        RewriteCond %{SERVER_NAME} =www.hamonikr.org
        RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>
